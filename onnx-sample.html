<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sims-web</title>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
    <h1>ONNX Runtime Web Sample</h1>
</body>
<script type="module">
    async function main() {
        try {
            // create a new session and load the specific model.
            //
            // the model in this example contains a single MatMul node
            // it has 2 inputs: 'a'(float32, 3x4) and 'b'(float32, 4x3)
            // it has 1 output: 'c'(float32, 3x3)
            const session = await ort.InferenceSession.create('data/sims.onnx');
            console.log('model loaded');

            // prepare inputs. a tensor need its corresponding TypedArray as data
            // const X = new ort.Tensor('float32', new Float32Array(33694), [2, 33694]); 
            // const X = new ort.Tensor('float32', new Float32Array(2*33694), [2, 33694]); 
            const num_cells = 1024;
            const X = new ort.Tensor('float32', new Float32Array(num_cells*33694), [num_cells, 33694]); 

            // feed inputs and run
            const results = await session.run({"input.1": X});
            console.log('inference done');
            console.log(results);


        } catch (e) {
            document.write(`failed to inference ONNX model: ${e}.`);
        }
    }
    main();
    console.log('done');
</script>
</html>